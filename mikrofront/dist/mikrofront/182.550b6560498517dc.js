"use strict";(self.webpackChunkmikrowizard=self.webpackChunkmikrowizard||[]).push([[182],{5182:(W,j,m)=>{m.r(j),m.d(j,{AuthModule:()=>J});var C=m(177),d=m(8921),u=m(7062),g=m(7390),M=m(9130),e=m(4438),F=m(9492),x=m(1170),h=m(9417),f=m(6467),v=m(9631),_=m(5084),y=m(4869),T=m(6600);const k=()=>["Local","Mikrowizard"];function A(t,r){if(1&t&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&t){const i=r.$implicit;e.Y8G("value",i),e.R7$(),e.SpI(" ",i," ")}}function I(t,r){if(1&t&&(e.j41(0,"mat-option",31),e.EFF(1),e.k0s()),2&t){const i=r.$implicit;e.Y8G("value",i),e.R7$(),e.SpI(" ",i," ")}}function E(t,r){1&t&&e.EFF(0),2&t&&e.SpI(" ",r.item.index," ")}function R(t,r){1&t&&e.nrm(0,"i",34)}function N(t,r){1&t&&e.nrm(0,"i",35)}function D(t,r){if(1&t&&(e.DNE(0,R,1,0,"i",32)(1,N,1,0,"i",33),e.EFF(2)),2&t){const i=r.item.name,s=r.item;e.Y8G("ngIf","local"==s.stype),e.R7$(),e.Y8G("ngIf","radius"==s.stype),e.R7$(),e.SpI(" ",i," ")}}function w(t,r){1&t&&e.EFF(0),2&t&&e.SpI(" ",r.item.devip," ")}function G(t,r){1&t&&e.EFF(0),2&t&&e.SpI(" ",r.item.username," ")}function S(t,r){if(1&t&&(e.j41(0,"div"),e.EFF(1),e.k0s()),2&t){const i=r.item.by;e.R7$(),e.JRh(i)}}function z(t,r){1&t&&e.EFF(0),2&t&&e.SpI(" ",r.item.ip," ")}function V(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const i=e.XpG().item.duration;e.R7$(),e.JRh(i)}}function B(t,r){if(1&t&&(e.j41(0,"span"),e.EFF(1),e.k0s()),2&t){const i=e.XpG().item;e.R7$(),e.JRh(i.message)}}function Y(t,r){if(1&t&&e.DNE(0,V,2,1,"span",36)(1,B,2,1,"span",36),2&t){const i=r.item;e.Y8G("ngIf","failed"!=i.ltype),e.R7$(),e.Y8G("ngIf","failed"==i.ltype)}}function U(t,r){1&t&&(e.j41(0,"c-badge",40),e.EFF(1," Logged In"),e.k0s())}function L(t,r){1&t&&(e.j41(0,"c-badge",41),e.EFF(1," Logged Out"),e.k0s())}function H(t,r){1&t&&(e.j41(0,"c-badge",42),e.EFF(1," Failed"),e.k0s())}function X(t,r){if(1&t&&e.DNE(0,U,2,0,"c-badge",37)(1,L,2,0,"c-badge",38)(2,H,2,0,"c-badge",39),2&t){const i=r.item.ltype;e.Y8G("ngIf","loggedin"==i),e.R7$(),e.Y8G("ngIf","loggedout"==i),e.R7$(),e.Y8G("ngIf","failed"==i)}}function $(t,r){1&t&&e.EFF(0),2&t&&e.SpI(" ",r.item.created," ")}const P=[{path:"",component:(()=>{class t{constructor(i,s,n,o){this.data_provider=i,this.router=s,this.login_checker=n,this.route=o,this.tz="UTC",this.devid=0,this.filters={devid:!1,ip:"",devip:"",user:"",state:"All",server:"All",connection_type:"All",start_time:!1,end_time:!1},this.filters_visible=!1,this.connection_types=[],this.source=[],this.columns=[],this.loading=!0,this.rows=[],this.sorting={enabled:!0,multiSorting:!0},this.paging={enabled:!0,page:1,pageSize:10,pageSizes:[5,10,25,50],display:g.sE.ADVANCED},this.columnMenu={enabled:!0,sort:!0,columnsManager:!0},this.infoPanel={enabled:!0,infoDialog:!1,columnsManager:!0,schemaManager:!0},this.rowSelection={enabled:!0,type:g.AU.CHECKBOX,mode:g.fL.MULTIPLE};var l=this;this.login_checker.isLoggedIn()||setTimeout(function(){l.router.navigate(["login"])},100),this.data_provider.getSessionInfo().then(c=>{l.uid=c.uid,l.uname=c.name,l.tz=c.tz,"admin"!=c.role&&setTimeout(function(){l.router.navigate(["/user/dashboard"])},100)})}reinitgrid(i,s){"start"==i?this.filters.start_time=s.target.value:"end"==i?this.filters.end_time=s.target.value:"ip"==i?this.filters.ip=s:"devip"==i?this.filters.devip=s:"user"==i?this.filters.user=s:"connection_type"==i?this.filters.connection_type=s:"state"==i?this.filters.state=s:"server"==i&&(this.filters.server=s),this.initGridTable()}secondsToString(p){var s=Math.floor(p/31536e3),o=0,l="";s&&o<2&&(l+=s+"y ",o++);var a=Math.floor((p%=31536e3)/86400);a&&o<2&&(l+=a+"d ",o++);var c=Math.floor((p%=86400)/3600);c&&o<2&&(l+=c+"h ",o++);var b=Math.floor((p%=3600)/60);return b&&o<2&&(l+=b+"m ",o++),(p%=60)&&o<2&&(l+=p+"s ",o++),l}ngOnInit(){this.devid=Number(this.route.snapshot.paramMap.get("devid")),this.devid>0&&(this.filters.devid=this.devid),this.initGridTable()}onSelectedRows(i){this.rows=i,this.Selectedrows=i.map(s=>s.source.id)}removefilter(i){delete this.filters[i],this.initGridTable()}toggleCollapse(){this.filters_visible=!this.filters_visible}logger(i){console.dir(i)}initGridTable(){var i=this;this.data_provider.get_auth_logs(this.filters).then(s=>{let n=1;this.source=s.map(o=>(o.index=n,i.connection_types.includes(o.by)||i.connection_types.push(o.by),o.sessionid?(o.stype="radius",o.duration=0!=o.ended?i.secondsToString(o.ended-o.started):"live"):(o.stype="local",o.duration="Local Access"),o.created=(0,M.qD)(o.created.split(".")[0]+".000Z",i.tz,"yyyy-MM-dd HH:mm:ss XXX"),n+=1,o)),this.loading=!1})}static#e=this.\u0275fac=function(s){return new(s||t)(e.rXU(F.C),e.rXU(u.Ix),e.rXU(x.T),e.rXU(u.nX))};static#t=this.\u0275cmp=e.VBU({type:t,selectors:[["ng-component"]],decls:89,vars:26,consts:[["picker1",""],["picker2",""],["multiSelect",""],["xs",""],[1,"mb-4"],["xs","",3,"lg"],["cButton","","color","primary",1,"me-1",3,"click"],[1,"fa-solid","fa-filter","mr-1"],["cCollapse","",3,"visible"],["xs","",1,"example-form",3,"lg"],["matInput","",3,"dateChange","ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["placeholder","Connection Type",3,"ngModelChange","ngModel"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["placeholder","State",3,"ngModelChange","ngModel"],["value","loggedin"],["value","loggedout"],["value","failed"],["placeholder","Server",3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],[3,"source","paging","columnMenu","sorting","infoPanel","autoResizeWidth"],["header","#No","type","NUMBER","field","index","width","25","align","CENTER"],["header","Device Name","field","name"],["header","Device IP","field","devip"],["header","Username","field","username"],["header","With","field","by"],["header","IP Address","field","ip"],["header","Time/Msg","field","duration"],["header","State","field","ltype",3,"width"],["header","Date","field","created"],[3,"value"],["cTooltip","local user","style","color: rgb(255, 42, 0); margin-right: 3px;font-size: .7em;","class","fa-solid fa-user-tie",4,"ngIf"],["cTooltip","Update failed","style","color: rgb(9, 97, 20); margin-right: 3px;font-size: .7em;","class","fa-solid fa-server",4,"ngIf"],["cTooltip","local user",1,"fa-solid","fa-user-tie",2,"color","rgb(255, 42, 0)","margin-right","3px","font-size",".7em"],["cTooltip","Update failed",1,"fa-solid","fa-server",2,"color","rgb(9, 97, 20)","margin-right","3px","font-size",".7em"],[4,"ngIf"],["color","success",4,"ngIf"],["color","warning",4,"ngIf"],["color","danger",4,"ngIf"],["color","success"],["color","warning"],["color","danger"]],template:function(s,n){if(1&s){const o=e.RV6();e.j41(0,"c-row")(1,"c-col",3)(2,"c-card",4)(3,"c-card-header")(4,"c-row")(5,"c-col",5),e.EFF(6," Authentication Logs "),e.k0s(),e.j41(7,"c-col",5)(8,"button",6),e.bIt("click",function(){return e.eBV(o),e.Njj(n.toggleCollapse())}),e.nrm(9,"i",7),e.EFF(10,"Filter"),e.k0s()()()(),e.j41(11,"c-card-body")(12,"c-row")(13,"div",8)(14,"c-col",9)(15,"mat-form-field")(16,"mat-label"),e.EFF(17,"Start date"),e.k0s(),e.j41(18,"input",10),e.bIt("dateChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("start",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.start_time,a)||(n.filters.start_time=a),e.Njj(a)}),e.k0s(),e.nrm(19,"mat-datepicker-toggle",11)(20,"mat-datepicker",null,0),e.k0s(),e.j41(22,"mat-form-field")(23,"mat-label"),e.EFF(24,"End date"),e.k0s(),e.j41(25,"input",10),e.bIt("dateChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("end",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.end_time,a)||(n.filters.end_time=a),e.Njj(a)}),e.k0s(),e.nrm(26,"mat-datepicker-toggle",11)(27,"mat-datepicker",null,1),e.k0s(),e.j41(29,"mat-form-field")(30,"mat-label"),e.EFF(31,"Connection Type"),e.k0s(),e.j41(32,"mat-select",12,2),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("connection_type",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.connection_type,a)||(n.filters.connection_type=a),e.Njj(a)}),e.j41(34,"mat-option",13),e.EFF(35,"All"),e.k0s(),e.DNE(36,A,2,2,"mat-option",14),e.k0s()(),e.j41(37,"mat-form-field")(38,"mat-label"),e.EFF(39,"Select action"),e.k0s(),e.j41(40,"mat-select",15,2),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("state",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.state,a)||(n.filters.state=a),e.Njj(a)}),e.j41(42,"mat-option",13),e.EFF(43,"All"),e.k0s(),e.j41(44,"mat-option",16),e.EFF(45," Logged In "),e.k0s(),e.j41(46,"mat-option",17),e.EFF(47," Logged Out "),e.k0s(),e.j41(48,"mat-option",18),e.EFF(49," Failed "),e.k0s()()(),e.j41(50,"mat-form-field")(51,"mat-label"),e.EFF(52,"Server"),e.k0s(),e.j41(53,"mat-select",19,2),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("server",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.server,a)||(n.filters.server=a),e.Njj(a)}),e.j41(55,"mat-option",13),e.EFF(56,"All"),e.k0s(),e.DNE(57,I,2,2,"mat-option",14),e.k0s()(),e.j41(58,"mat-form-field")(59,"mat-label"),e.EFF(60,"Device IP"),e.k0s(),e.j41(61,"input",20),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("devip",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.devip,a)||(n.filters.devip=a),e.Njj(a)}),e.k0s()(),e.j41(62,"mat-form-field")(63,"mat-label"),e.EFF(64,"IP/MAC"),e.k0s(),e.j41(65,"input",20),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("ip",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.ip,a)||(n.filters.ip=a),e.Njj(a)}),e.k0s()(),e.j41(66,"mat-form-field")(67,"mat-label"),e.EFF(68,"Username"),e.k0s(),e.j41(69,"input",20),e.bIt("ngModelChange",function(a){return e.eBV(o),e.Njj(n.reinitgrid("user",a))}),e.mxI("ngModelChange",function(a){return e.eBV(o),e.DH7(n.filters.user,a)||(n.filters.user=a),e.Njj(a)}),e.k0s()()()()(),e.j41(70,"gui-grid",21)(71,"gui-grid-column",22),e.DNE(72,E,1,1,"ng-template"),e.k0s(),e.j41(73,"gui-grid-column",23),e.DNE(74,D,3,3,"ng-template"),e.k0s(),e.j41(75,"gui-grid-column",24),e.DNE(76,w,1,1,"ng-template"),e.k0s(),e.j41(77,"gui-grid-column",25),e.DNE(78,G,1,1,"ng-template"),e.k0s(),e.j41(79,"gui-grid-column",26),e.DNE(80,S,2,1,"ng-template"),e.k0s(),e.j41(81,"gui-grid-column",27),e.DNE(82,z,1,1,"ng-template"),e.k0s(),e.j41(83,"gui-grid-column",28),e.DNE(84,Y,2,2,"ng-template"),e.k0s(),e.j41(85,"gui-grid-column",29),e.DNE(86,X,3,3,"ng-template"),e.k0s(),e.j41(87,"gui-grid-column",30),e.DNE(88,$,1,1,"ng-template"),e.k0s()()()()()()}if(2&s){const o=e.sdS(21),l=e.sdS(28);e.R7$(5),e.Y8G("lg",11),e.R7$(2),e.Y8G("lg",1),e.R7$(6),e.Y8G("visible",n.filters_visible),e.R7$(),e.Y8G("lg",12),e.R7$(4),e.Y8G("matDatepicker",o),e.R50("ngModel",n.filters.start_time),e.R7$(),e.Y8G("for",o),e.R7$(6),e.Y8G("matDatepicker",l),e.R50("ngModel",n.filters.end_time),e.R7$(),e.Y8G("for",l),e.R7$(6),e.R50("ngModel",n.filters.connection_type),e.R7$(4),e.Y8G("ngForOf",n.connection_types),e.R7$(4),e.R50("ngModel",n.filters.state),e.R7$(13),e.R50("ngModel",n.filters.server),e.R7$(4),e.Y8G("ngForOf",e.lJ4(25,k)),e.R7$(4),e.R50("ngModel",n.filters.devip),e.R7$(4),e.R50("ngModel",n.filters.ip),e.R7$(4),e.R50("ngModel",n.filters.user),e.R7$(),e.Y8G("source",n.source)("paging",n.paging)("columnMenu",n.columnMenu)("sorting",n.sorting)("infoPanel",n.infoPanel)("autoResizeWidth",!0),e.R7$(15),e.Y8G("width",110)}},dependencies:[d.iby,d.qHy,d.lMi,C.Sq,C.bT,d.gLf,d.oMR,h.me,h.BC,h.vS,d._fv,g.V1,g.fz,d.DcD,f.rl,f.nJ,f.yw,v.fg,_.Vh,_.bZ,_.bU,y.VO,T.wT,d.nSt],styles:[".example-form{--mat-form-field-container-height: 36px;--mat-form-field-filled-label-display: none;--mat-form-field-container-vertical-padding: 6px;--mat-form-field-filled-with-label-container-padding-top: 6px;--mat-form-field-filled-with-label-container-padding-bottom: 6px;--mat-select-arrow-transform: none;--mdc-checkbox-state-layer-size: 28px;--mat-checkbox-touch-target-display: none;--mdc-switch-state-layer-size: 28px;--mdc-radio-state-layer-size: 28px;--mat-radio-touch-target-display: none;--mdc-list-list-item-one-line-container-height: 24px;--mdc-list-list-item-two-line-container-height: 48px;--mdc-list-list-item-three-line-container-height: 56px;--mat-list-list-item-leading-icon-start-space: 16px;--mat-list-list-item-leading-icon-end-space: 32px;--mat-paginator-container-size: 40px;--mat-paginator-form-field-container-height: 36px;--mat-paginator-form-field-container-vertical-padding: 6px;--mdc-text-button-container-height: 24px;--mdc-filled-button-container-height: 24px;--mdc-outlined-button-container-height: 24px;--mdc-protected-button-container-height: 24px;--mat-text-button-touch-target-display: none;--mat-filled-button-touch-target-display: none;--mat-protected-button-touch-target-display: none;--mat-outlined-button-touch-target-display: none;--mat-fab-touch-target-display: none;--mat-fab-small-touch-target-display: none;--mat-table-header-container-height: 40px;--mat-table-footer-container-height: 36px;--mat-table-row-item-container-height: 36px;--mat-expansion-header-collapsed-state-height: 36px;--mat-expansion-header-expanded-state-height: 48px;--mat-stepper-header-height: 42px;--mat-toolbar-standard-height: 52px;--mat-toolbar-mobile-height: 44px;--mat-tree-node-min-height: 28px;--mat-standard-button-toggle-height: 24px;--mat-icon-button-touch-target-display: none}.example-form .mat-calendar-controls{--mat-icon-button-touch-target-display: none}.example-form .mat-calendar-controls .mat-mdc-icon-button.mat-mdc-button-base{--mdc-icon-button-state-layer-size: 40px;width:var(--mdc-icon-button-state-layer-size);height:var(--mdc-icon-button-state-layer-size);padding:8px}.example-form .mat-mdc-chip.mat-mdc-standard-chip{--mdc-chip-container-height: 24px}.example-form .mdc-list-item__start,.example-form .mdc-list-item__end{--mdc-radio-state-layer-size: 28px}.example-form .mat-mdc-list-item.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:40px}.example-form .mat-mdc-list-item.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:56px}.example-form .mat-mdc-tab-header{--mdc-secondary-navigation-tab-container-height: 32px}.example-form .mat-mdc-icon-button.mat-mdc-button-base{--mdc-icon-button-state-layer-size: 28px;width:var(--mdc-icon-button-state-layer-size);height:var(--mdc-icon-button-state-layer-size);padding:2px}.example-form .mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined) .mat-mdc-floating-label{display:inline}.example-form mat-form-field *{font-size:13px!important}.example-form .mat-mdc-form-field-infix{width:150px}:host .legend small{font-size:x-small}\n"],encapsulation:2})}return t})(),data:{title:$localize`Authentication Logs`}}];let O=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.$C({type:t});static#i=this.\u0275inj=e.G2t({imports:[u.iI.forChild(P),u.iI]})}return t})(),J=(()=>{class t{static#e=this.\u0275fac=function(s){return new(s||t)};static#t=this.\u0275mod=e.$C({type:t});static#i=this.\u0275inj=e.G2t({imports:[O,d.Dw2,C.MD,d.pc9,h.YN,d.tmq,g.uM,d.G95,f.RG,v.fS,_.X6,y.Ve,d.EJq]})}return t})()}}]);