"use strict";(self.webpackChunkmikrowizard=self.webpackChunkmikrowizard||[]).push([[381],{7381:(V,b,d)=>{d.r(b),d.d(b,{SyslogModule:()=>G});var _=d(177),c=d(8921),v=d(4983),p=d(7062),g=d(7390),C=d(9130),t=d(4438),S=d(9492),w=d(1170),h=d(9417),x=d(9631),f=d(6467),y=d(4869),j=d(6600),u=d(5084);function M(i,m){if(1&i&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&i){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function k(i,m){if(1&i&&(t.j41(0,"mat-option",24),t.EFF(1),t.k0s()),2&i){const e=m.$implicit;t.Y8G("value",e),t.R7$(),t.SpI(" ",e," ")}}function F(i,m){1&i&&t.EFF(0),2&i&&t.SpI(" ",m.item.index," ")}function E(i,m){if(1&i&&(t.j41(0,"div",25)(1,"span",26),t.EFF(2),t.k0s(),t.j41(3,"span",27),t.EFF(4),t.k0s()()),2&i){const e=m.item.username,l=m.item;t.R7$(2),t.JRh(e),t.R7$(2),t.Lme("",l.first_name," ",l.last_name,"")}}function z(i,m){1&i&&t.EFF(0),2&i&&t.SpI(" ",m.item.section," ")}function R(i,m){1&i&&t.EFF(0),2&i&&t.SpI(" ",m.item.action," ")}function T(i,m){1&i&&t.EFF(0),2&i&&t.SpI(" ",m.item.ip," ")}function I(i,m){1&i&&t.EFF(0),2&i&&t.SpI(" ",m.item.created," ")}const D=[{path:"",component:(()=>{class i{constructor(e,l,n,a){this.data_provider=e,this.router=l,this.route=n,this.login_checker=a,this.tz="UTC",this.filters={start_time:!1,end_time:!1,section:"All",action:"All",ip:""},this.event_section=[],this.event_action=[],this.filters_visible=!1,this.source=[],this.columns=[],this.loading=!0,this.rows=[],this.userid=0,this.sorting={enabled:!0,multiSorting:!0},this.rowDetail={enabled:!0,template:s=>`\n\t\t\t<div class='log-detail' style="width: 355px;color:#fff;background-color:#3399ff">\n\t\t\t<h2>System Log :</h2>\n\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Section</td>\n\t\t\t\t\t<td>${s.section}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Action</td>\n\t\t\t\t\t<td>${s.action}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Time</td>\n\t\t\t\t\t<td>${s.created}</td>\n\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t<h2 style="margin-top: 5px;">User Detail :\n\t\t\t\t</h2>\n\t\t\t\t<table>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>User</td>\n\t\t\t\t\t<td>${s.username}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>FirstName</td>\n\t\t\t\t\t<td>${s.first_name}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>LastName</td>\n\t\t\t\t\t<td>${s.last_name}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>IP</td>\n\t\t\t\t\t<td>${s.ip}</td>\n\t\t\t\t</tr>\n\t\t\t\t<tr>\n\t\t\t\t\t<td>Agent</td>\n\t\t\t\t\t<td><div style="height: 40px;overflow-y: scroll;">${s.agent}</div></td>\n\t\t\t\t</tr>\n\t\t\t\t</table>\n\t\t\t\t<div class="code-title">data</div>\n\t\t\t\t<code>\n\t\t\t\t\t${s.data}\n\t\t\t\t</code>\n\t\t\t</div>`},this.paging={enabled:!0,page:1,pageSize:10,pageSizes:[5,10,25,50],display:g.sE.ADVANCED},this.columnMenu={enabled:!0,sort:!0,columnsManager:!0},this.infoPanel={enabled:!0,infoDialog:!1,columnsManager:!0,schemaManager:!0},this.rowSelection={enabled:!0,type:g.AU.CHECKBOX,mode:g.fL.MULTIPLE};var r=this;this.login_checker.isLoggedIn()||setTimeout(function(){r.router.navigate(["login"])},100),this.data_provider.getSessionInfo().then(s=>{r.uid=s.uid,r.uname=s.name,r.tz=s.tz,"admin"!=s.role&&setTimeout(function(){r.router.navigate(["/user/dashboard"])},100)})}ngOnInit(){this.userid=Number(this.route.snapshot.paramMap.get("userid")),this.userid>0&&(this.filters.userid=this.userid),this.initGridTable()}toggleCollapse(){this.filters_visible=!this.filters_visible}logger(e){console.dir(e)}reinitgrid(e,l){"start"==e?this.filters.start_time=l.target.value:"end"==e?this.filters.end_time=l.target.value:"section"==e?this.filters.section=l:"action"==e?this.filters.action=l:"ip"==e&&(this.filters.ip=l),this.initGridTable()}initGridTable(){var e=this;e.event_section=[],e.event_action=[],this.data_provider.get_syslog(this.filters).then(l=>{let n=1;this.source=l.map(a=>(a.index=n,e.event_section.includes(a.section)||e.event_section.push(a.section),e.event_action.includes(a.action)||e.event_action.push(a.action),a.created=(0,C.qD)(a.created.split(".")[0]+".000Z",e.tz,"yyyy-MM-dd HH:mm:ss XXX"),n+=1,a)),this.loading=!1})}static#t=this.\u0275fac=function(l){return new(l||i)(t.rXU(S.C),t.rXU(p.Ix),t.rXU(p.nX),t.rXU(w.T))};static#e=this.\u0275cmp=t.VBU({type:i,selectors:[["ng-component"]],decls:62,vars:24,consts:[["picker1",""],["picker2",""],["multiSelect",""],["xs",""],[1,"mb-4"],["xs","",3,"lg"],["cButton","","color","primary",1,"me-1",3,"click"],[1,"fa-solid","fa-filter","mr-1"],["cCollapse","",3,"visible"],["xs","",1,"example-form",3,"lg"],["matInput","",3,"dateChange","ngModelChange","matDatepicker","ngModel"],["matIconSuffix","",3,"for"],["placeholder","Event Section",3,"ngModelChange","ngModel"],["value","All"],[3,"value",4,"ngFor","ngForOf"],["placeholder","Event action",3,"ngModelChange","ngModel"],["matInput","",3,"ngModelChange","ngModel"],["wid","",3,"rowDetail","horizontalGrid","rowHeight","source","columnMenu","paging","sorting","infoPanel","autoResizeWidth"],["header","#No","type","NUMBER","field","index","width","1","align","CENTER"],["header","username","field","username"],["header","Section","field","section"],["header","action","field","action"],["header","ip","field","ip"],["header","Time","field","created"],[3,"value"],[1,"gui-dev-info"],[1,"gui-dev-info-name"],[1,"gui-dev-info-ip"]],template:function(l,n){if(1&l){const a=t.RV6();t.j41(0,"c-row")(1,"c-col",3)(2,"c-card",4)(3,"c-card-header")(4,"c-row")(5,"c-col",5),t.EFF(6," Devices "),t.k0s(),t.j41(7,"c-col",5)(8,"button",6),t.bIt("click",function(){return t.eBV(a),t.Njj(n.toggleCollapse())}),t.nrm(9,"i",7),t.EFF(10,"Filter"),t.k0s()()()(),t.j41(11,"c-card-body")(12,"c-row")(13,"div",8)(14,"c-col",9)(15,"mat-form-field")(16,"mat-label"),t.EFF(17,"Start date"),t.k0s(),t.j41(18,"input",10),t.bIt("dateChange",function(o){return t.eBV(a),t.Njj(n.reinitgrid("start",o))}),t.mxI("ngModelChange",function(o){return t.eBV(a),t.DH7(n.filters.start_time,o)||(n.filters.start_time=o),t.Njj(o)}),t.k0s(),t.nrm(19,"mat-datepicker-toggle",11)(20,"mat-datepicker",null,0),t.k0s(),t.j41(22,"mat-form-field")(23,"mat-label"),t.EFF(24,"End date"),t.k0s(),t.j41(25,"input",10),t.bIt("dateChange",function(o){return t.eBV(a),t.Njj(n.reinitgrid("end",o))}),t.mxI("ngModelChange",function(o){return t.eBV(a),t.DH7(n.filters.end_time,o)||(n.filters.end_time=o),t.Njj(o)}),t.k0s(),t.nrm(26,"mat-datepicker-toggle",11)(27,"mat-datepicker",null,1),t.k0s(),t.j41(29,"mat-form-field")(30,"mat-label"),t.EFF(31,"Select section"),t.k0s(),t.j41(32,"mat-select",12,2),t.bIt("ngModelChange",function(o){return t.eBV(a),t.Njj(n.reinitgrid("section",o))}),t.mxI("ngModelChange",function(o){return t.eBV(a),t.DH7(n.filters.section,o)||(n.filters.section=o),t.Njj(o)}),t.j41(34,"mat-option",13),t.EFF(35,"All"),t.k0s(),t.DNE(36,M,2,2,"mat-option",14),t.k0s()(),t.j41(37,"mat-form-field")(38,"mat-label"),t.EFF(39,"Select action"),t.k0s(),t.j41(40,"mat-select",15,2),t.bIt("ngModelChange",function(o){return t.eBV(a),t.Njj(n.reinitgrid("action",o))}),t.mxI("ngModelChange",function(o){return t.eBV(a),t.DH7(n.filters.action,o)||(n.filters.action=o),t.Njj(o)}),t.j41(42,"mat-option",13),t.EFF(43,"All"),t.k0s(),t.DNE(44,k,2,2,"mat-option",14),t.k0s()(),t.j41(45,"mat-form-field")(46,"mat-label"),t.EFF(47,"IP"),t.k0s(),t.j41(48,"input",16),t.bIt("ngModelChange",function(o){return t.eBV(a),t.Njj(n.reinitgrid("ip",o))}),t.mxI("ngModelChange",function(o){return t.eBV(a),t.DH7(n.filters.ip,o)||(n.filters.ip=o),t.Njj(o)}),t.k0s()()()()(),t.j41(49,"gui-grid",17)(50,"gui-grid-column",18),t.DNE(51,F,1,1,"ng-template"),t.k0s(),t.j41(52,"gui-grid-column",19),t.DNE(53,E,5,3,"ng-template"),t.k0s(),t.j41(54,"gui-grid-column",20),t.DNE(55,z,1,1,"ng-template"),t.k0s(),t.j41(56,"gui-grid-column",21),t.DNE(57,R,1,1,"ng-template"),t.k0s(),t.j41(58,"gui-grid-column",22),t.DNE(59,T,1,1,"ng-template"),t.k0s(),t.j41(60,"gui-grid-column",23),t.DNE(61,I,1,1,"ng-template"),t.k0s()()()()()()}if(2&l){const a=t.sdS(21),r=t.sdS(28);t.R7$(5),t.Y8G("lg",11),t.R7$(2),t.Y8G("lg",1),t.R7$(6),t.Y8G("visible",n.filters_visible),t.R7$(),t.Y8G("lg",12),t.R7$(4),t.Y8G("matDatepicker",a),t.R50("ngModel",n.filters.start_time),t.R7$(),t.Y8G("for",a),t.R7$(6),t.Y8G("matDatepicker",r),t.R50("ngModel",n.filters.end_time),t.R7$(),t.Y8G("for",r),t.R7$(6),t.R50("ngModel",n.filters.section),t.R7$(4),t.Y8G("ngForOf",n.event_section),t.R7$(4),t.R50("ngModel",n.filters.action),t.R7$(4),t.Y8G("ngForOf",n.event_action),t.R7$(4),t.R50("ngModel",n.filters.ip),t.R7$(),t.Y8G("rowDetail",n.rowDetail)("horizontalGrid",!0)("rowHeight",52)("source",n.source)("columnMenu",n.columnMenu)("paging",n.paging)("sorting",n.sorting)("infoPanel",n.infoPanel)("autoResizeWidth",!0)}},dependencies:[c.iby,c.qHy,c.lMi,_.Sq,c.gLf,c.oMR,h.me,h.BC,h.vS,c._fv,g.V1,g.fz,c.DcD,x.fg,f.rl,f.nJ,f.yw,y.VO,j.wT,u.Vh,u.bZ,u.bU],styles:[":host .legend small{font-size:x-small}.log-detail{padding:30px 10px;box-sizing:border-box}.log-detail h1{font-size:2em;font-weight:700;margin:0;padding:0}.log-detail small{position:relative;top:-7px;padding:0;font-weight:700;font-size:1.1em}.log-detail table{width:100%;border-collapse:collapse!important;margin:5px 0 0;padding:0;background-color:#ffffff29!important;color:#000}.log-detail th{text-align:left}.log-detail th,.log-detail td{border:1px solid rgba(255,255,255,.2901960784)!important;padding:.3rem!important}.gui-close-icon-wrapper .gui-close-icon:after,.gui-close-icon-wrapper .gui-close-icon:before{background-color:#fff!important}.log-detail code{padding:5px!important;display:block;background:#1d1f21;color:#c5c8c6;border-bottom-left-radius:3px;border-bottom-right-radius:3px;width:100%;min-height:unset!important;height:100px!important;overflow-y:scroll!important}.log-detail .code-title{background-color:#393e42!important;width:100%;padding:2px 15px;display:inline-block;margin-top:10px;color:#d2d2d2;border-top-left-radius:3px;border-top-right-radius:3px;font-weight:700}.gui-row-detail{height:100%}.gui-dev-info{display:inline-flex;flex-direction:column;align-items:stretch;align-content:center;justify-content:center;white-space:normal;line-height:17px}.gui-dev-info-name{font-weight:700}.gui-dev-info-ip{color:#525252;font-style:italic;font-size:13px;overflow:hidden}.gui-row-detail>div{height:100%}.gui-row-detail .log-detail{height:100%}.gui-structure{min-height:550px}.example-form{--mat-form-field-container-height: 36px;--mat-form-field-filled-label-display: none;--mat-form-field-container-vertical-padding: 6px;--mat-form-field-filled-with-label-container-padding-top: 6px;--mat-form-field-filled-with-label-container-padding-bottom: 6px;--mat-select-arrow-transform: none;--mdc-checkbox-state-layer-size: 28px;--mat-checkbox-touch-target-display: none;--mdc-switch-state-layer-size: 28px;--mdc-radio-state-layer-size: 28px;--mat-radio-touch-target-display: none;--mdc-list-list-item-one-line-container-height: 24px;--mdc-list-list-item-two-line-container-height: 48px;--mdc-list-list-item-three-line-container-height: 56px;--mat-list-list-item-leading-icon-start-space: 16px;--mat-list-list-item-leading-icon-end-space: 32px;--mat-paginator-container-size: 40px;--mat-paginator-form-field-container-height: 36px;--mat-paginator-form-field-container-vertical-padding: 6px;--mdc-text-button-container-height: 24px;--mdc-filled-button-container-height: 24px;--mdc-outlined-button-container-height: 24px;--mdc-protected-button-container-height: 24px;--mat-text-button-touch-target-display: none;--mat-filled-button-touch-target-display: none;--mat-protected-button-touch-target-display: none;--mat-outlined-button-touch-target-display: none;--mat-fab-touch-target-display: none;--mat-fab-small-touch-target-display: none;--mat-table-header-container-height: 40px;--mat-table-footer-container-height: 36px;--mat-table-row-item-container-height: 36px;--mat-expansion-header-collapsed-state-height: 36px;--mat-expansion-header-expanded-state-height: 48px;--mat-stepper-header-height: 42px;--mat-toolbar-standard-height: 52px;--mat-toolbar-mobile-height: 44px;--mat-tree-node-min-height: 28px;--mat-standard-button-toggle-height: 24px;--mat-icon-button-touch-target-display: none}.example-form .mat-calendar-controls{--mat-icon-button-touch-target-display: none}.example-form .mat-calendar-controls .mat-mdc-icon-button.mat-mdc-button-base{--mdc-icon-button-state-layer-size: 40px;width:var(--mdc-icon-button-state-layer-size);height:var(--mdc-icon-button-state-layer-size);padding:8px}.example-form .mat-mdc-chip.mat-mdc-standard-chip{--mdc-chip-container-height: 24px}.example-form .mdc-list-item__start,.example-form .mdc-list-item__end{--mdc-radio-state-layer-size: 28px}.example-form .mat-mdc-list-item.mdc-list-item--with-leading-avatar.mdc-list-item--with-one-line,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-checkbox.mdc-list-item--with-one-line,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-one-line{height:40px}.example-form .mat-mdc-list-item.mdc-list-item--with-leading-avatar.mdc-list-item--with-two-lines,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-checkbox.mdc-list-item--with-two-lines,.example-form .mat-mdc-list-item.mdc-list-item--with-leading-icon.mdc-list-item--with-two-lines{height:56px}.example-form .mat-mdc-tab-header{--mdc-secondary-navigation-tab-container-height: 32px}.example-form .mat-mdc-icon-button.mat-mdc-button-base{--mdc-icon-button-state-layer-size: 28px;width:var(--mdc-icon-button-state-layer-size);height:var(--mdc-icon-button-state-layer-size);padding:2px}.example-form .mat-mdc-text-field-wrapper:not(.mdc-text-field--outlined) .mat-mdc-floating-label{display:inline}.example-form mat-form-field *{font-size:13px!important}.example-form .mat-mdc-form-field-infix{width:150px}\n"],encapsulation:2})}return i})(),data:{title:$localize`Mikrowizard System Logs`}}];let N=(()=>{class i{static#t=this.\u0275fac=function(l){return new(l||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[p.iI.forChild(D),p.iI]})}return i})(),G=(()=>{class i{static#t=this.\u0275fac=function(l){return new(l||i)};static#e=this.\u0275mod=t.$C({type:i});static#i=this.\u0275inj=t.G2t({imports:[N,c.Dw2,_.MD,c.pc9,h.YN,c.tmq,g.uM,c.G95,c.krp,x.fS,f.RG,y.Ve,v.An,u.X6]})}return i})()}}]);